#!/bin/sh

app="maim -u"
dir="${HOME}/img/shots/"
data=$(date +%Y-%m-%d_%H-%M-%S)
nome="ss-${data}"
extensao=".png"
atraso=10
icone="/usr/share/icons/Arc/devices/24@2x/video-display.png"
tipo="image/png"
lixeira="${HOME}/.local/share/Trash"

[ ! -d $dir ] && mkdir -p $dir
[ ! -d $lixeira ] && mkdir -p $lixeira

if [ $1 ]; then
	icone="/usr/share/icons/Arc/places/24@2x/user-trash.png"
	mv ${dir}* ${lixeira}/files/
	msg="Pasta de screenshots($dir) limpa!"
else
	arquivo="${nome}${extensao}"
	$app ${arquivo}
	msg="A screenshot <b>$arquivo</b> salva em <b>$dir</b>..."
fi

if [ ! -z $arquivo ]; then
	if [ $(pwd) != $dir ]; then
		mv $arquivo $dir
	fi
fi

xclip -selection clipboard -t $tipo -i $dir$arquivo
notify-send -i $icone "ScreenShot" "$msg"
